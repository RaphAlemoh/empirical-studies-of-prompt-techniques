 ```php
function &removeDuplicates(array &$nums) {
    $i = 0;
    for ($j = 1; $j < count($nums); $j++) {
        if ($nums[$i] !== $nums[$j]) {
            $nums[$i+1] = $nums[$j];
            $i++;
        }
    }
    unset($nums[++$i]);
    return count($nums);
}
```

