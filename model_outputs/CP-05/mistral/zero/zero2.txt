 Here is a solution in PHP for the problem you described, using an O(n) time algorithm. The idea behind this solution is to maintain two pointers `left` and `right`, initially set to the first and last indices of the array respectively. We then iterate through the array, setting the minimum height `minLeft` to be the minimum height from both the left and right pointers, and updating the trapped water for each bar between the pointers as follows:

```php
function trap($height) {
    $n = count($height);
    $left = 0;
    $right = $n - 1;
    $trappedWater = 0;
    $minLeft = $height[$left];

    while ($left < $right) {
        if ($height[$left] < $minLeft) {
            $minLeft = min($height[$left], $minLeft);
            $trappedWater += $minLeft - $height[$left];
        }
        if ($height[$right] < $minLeft) {
            $minLeft = min($height[$right], $minLeft);
        } else {
            $right--;
        }
        $left++;
    }

    return $trappedWater;
}
```

This code should work for the given problem and constraints. You can test it using the following example:

```php
$height = [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1];
echo trap($height); // Output: 6
```

