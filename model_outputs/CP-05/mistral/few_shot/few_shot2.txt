 Here is a solution for the given task in PHP:

```php
function trap(array $height): int {
    $n = count($height);
    if ($n < 3) {
        return 0;
    }

    $leftMax = new SplMinHeap();
    $rightMax = new SplMinHeap();
    $leftMax->insert(array_shift($height));
    $trappedWater = 0;

    for ($i = 1; $i < $n; ++$i) {
        $rightMax->insert($height[$i]);
        $curLeft = $leftMax->extractMin();
        if ($height[$i] > $curLeft) {
            $leftMax->insert($height[$i]);
        } else {
            $trappedWater += max(0, $curLeft - $height[$i]);
        }
    }

    reset($height);
    array_pop($height);

    foreach ($height as $h) {
        $leftMax->insert($h);
        $curRight = $rightMax->extractMin();
        if ($h > $curRight) {
            $rightMax->insert($h);
        } else {
            $trappedWater += max(0, $curRight - $h);
        }
    }

    return $trappedWater;
}
```

This implementation uses two min-heaps to store the maximum height on the left and right sides of each bar. The trapped water at each bar is calculated by taking the minimum between the left maximum and the current height, and subtracting the current height. The total trapped water is then the sum of all trapped waters found in the loop.

It first processes elements from left to right, and then processes elements from right to left. This approach ensures that we calculate the trapped water for each bar correctly even if there are tall bars in between shorter ones on both sides.

The function returns the total units of trapped water as an integer.

